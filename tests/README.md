Testing and verification of BTM functionality.

# WARNING
The tests run against actual data, and test a number of permutations.
Because of this, they take some time to run, over two minutes
on modern hardware.
