Testing and verification of BTM functionality.

WARNING: the tests run against actual data, and test a number of permutations. Because of this, they take some time to run, often upwards of five minutes.
